<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Debug Test</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    pre { background: #f4f4f4; padding: 10px; overflow-x: auto; }
    .success { color: green; }
    .error { color: red; }
    button { padding: 10px 20px; margin: 10px 0; cursor: pointer; }
  </style>
</head>
<body>
  <h1>API Debug Test</h1>
  <button onclick="testWeatherAPI()">Test Weather API</button>
  <button onclick="testCurrencyAPI()">Test Currency API</button>
  <div id="result"></div>
  
  <script>
    const result = document.getElementById('result');
    
    async function testWeatherAPI() {
      result.innerHTML = '<p>Testing Weather API...</p>';
      
      try {
        // Calculate date range (last 7 days)
        const endDate = new Date().toISOString().split('T')[0];
        const startDate = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
        
        const url = `https://archive-api.open-meteo.com/v1/archive?latitude=40.7128&longitude=-74.0060&start_date=${startDate}&end_date=${endDate}&hourly=temperature_2m&timezone=America/New_York`;
        
        result.innerHTML += `<p>URL: ${url}</p>`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        result.innerHTML += `
          <p class="success">✓ Weather API Success!</p>
          <p>Data points: ${data.hourly?.time?.length || 0}</p>
          <pre>${JSON.stringify(data, null, 2).substring(0, 500)}...</pre>
        `;
      } catch (error) {
        result.innerHTML += `<p class="error">✗ Error: ${error.message}</p>`;
      }
    }
    
    async function testCurrencyAPI() {
      result.innerHTML = '<p>Testing Currency API...</p>';
      
      try {
        const url = 'https://api.frankfurter.app/2024-01-01..2024-12-31?from=EUR&to=USD';
        
        result.innerHTML += `<p>URL: ${url}</p>`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        const rateCount = Object.keys(data.rates || {}).length;
        
        result.innerHTML += `
          <p class="success">✓ Currency API Success!</p>
          <p>Data points: ${rateCount}</p>
          <pre>${JSON.stringify(data, null, 2).substring(0, 500)}...</pre>
        `;
      } catch (error) {
        result.innerHTML += `<p class="error">✗ Error: ${error.message}</p>`;
      }
    }
  </script>
</body>
</html>
